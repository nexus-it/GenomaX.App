UPDATE `itconfig` SET `Version_DCD`='[VIBRANIUM]20.08.12.001';
UPDATE `itreports` SET `SQL_RPT`='SELECT concat(c.Codigo_CIT,\'-\',c.Codigo_AGE) AS \'CODIGO CEX\', j.Sigla_TID AS \'TIPO DOC.\', e.ID_TER AS \'IDENTIFICACION\', a.Codigo_SEX AS \'GENERO\', e.Nombre_TER AS \'NOMBRE PACIENTE\', TIMESTAMPDIFF(YEAR,a.FechaNac_PAC,c.FechaGraba_CIT) AS \'EDAD\', \r\n d.Telefono_TER AS \'TELEFONOS\', d.Direccion_TER AS \'DIRECCION\', i.Nombre_EPS AS \'CONTRATO\', g.Nombre_ARE AS \'AREA\', h.Nombre_CNS AS \'CONSULTORIO\', c.Hora_AGE AS \'TURNO\', c.Fecha_AGE AS \'FECHA CITA\', c.FechaDeseada_CIT AS \'FECHA DESEADA\' , c.FechaGraba_CIT AS \'FECHA ASIGNACION\', \r\n (case c.Estado_CIT when \'X\' then \'CANCELADA\' when \'R\' then \'REPROGRAMADA\' ELSE ( case c.Confirma_CIT when \'1\' then \'ATENDIDO\' when \'0\' then \'NO ASISTE\' END) END) AS \'ESTADO\', \r\n f.Nombre_ESP AS \'ESPECIALIDAD\', d.ID_TER AS \'ID MEDICO\', d.Nombre_TER AS \'NOMBRE DEL MEDICO\', case c.TipoConsulta_CIT when \'1\' then \'PRIMERA VEZ\' ELSE \'CONTROL\' END AS \'TIPO CITA\', u.ID_USR AS \'COD. USUARIO\', u.Nombre_USR AS \'NOMBRE USUARIO\'\r\nFrom gxpacientes a, gxagendacab b, gxcitasmedicas c, czterceros d, czterceros e, gxespecialidades f, gxareas g, gxconsultorios h, gxeps i, cztipoid j, itusuarios u\r\nWhere a.Codigo_TER=d.Codigo_TER and a.Codigo_TER=c.Codigo_TER and e.Codigo_TER=b.Codigo_TER and f.Codigo_ESP=b.Codigo_ESP and j.Codigo_TID=d.Codigo_TID AND u.Codigo_USR=c.Codigo_USR\r\nand g.Codigo_ARE=b.Codigo_ARE and c.Codigo_AGE=b.Codigo_AGE and h.Codigo_CNS=b.Codigo_CNS and i.Codigo_EPS=a.Codigo_EPS  AND Estado_AGE=\'1\' \r\n AND @VARFECHA  between \'@FECHA_INICIAL\' and \'@FECHA_FINAL 23:59:59\'  Order By  5,2,3,6,1,7' WHERE  `Codigo_RPT`='citasxdia' AND `Codigo_DCD`=0;
UPDATE `itreports` SET `SQL_RPT`='Select  D.Codigo_FAC as \'Factura\', D.Fecha_FAC as \'Fecha Factura\',LPAD(A.Codigo_ADM,10,\'0\') as \'Ingreso\', concat(Q.Sigla_TID,\' \',C.ID_TER) as \'ID Paciente\', left(C.Nombre_TER, 60) as \'Paciente\', \r\n J.Descripcion_ADM as \'Descripcion\', F.Nombre_TER as \'Entidad\', concat(\'{\',I.Codigo_USR,\'} \', I.ID_USR) as \'Usuario Admisiona\', D.ValPaciente_FAC as \'Val Paciente\', D.ValEntidad_FAC as \'Val Entidad\', K.Codigo_RAD as \'No. Radicado\',  L.FechaConf_RAD as \'Fec Radicado\', D.ValCredito_FAC as \'Val Crédito\', D.ValTotal_FAC as \'Total\' \r\nFrom  czterceros AS C, gxeps AS E, czterceros AS F, cztipoid as Q,  itusuarios AS I, gxtipoingreso AS J, gxadmision AS A, gxfacturas AS D \r\n left join czradicacionesdet AS K On D.Codigo_FAC=K.Codigo_FAC left join czradicacionescab AS L On L.Codigo_RAD=K.Codigo_RAD\r\nWhere A.Codigo_TER = C.Codigo_TER AND Q.Codigo_TID = C.Codigo_TID and D.Codigo_ADM=A.Codigo_ADM\r\n AND F.Codigo_TER = E.Codigo_TER AND trim(D.Codigo_EPS) = trim(E.Codigo_EPS) \r\n AND D.Codigo_USR = I.Codigo_USR AND J.Tipo_ADM = A.Ingreso_ADM and D.Estado_FAC=\'1\'\r\n AND D.Fecha_FAC>=\'@FECHA_INICIAL 00:00:00\' AND D.Fecha_FAC<=\'@FECHA_FINAL 23:59:59\'\r\n \r\n Union\r\n \r\nSelect \r\n D.Codigo_FAC, DATE_FORMAT(D.Fecha_FAC, \'%d/%m/%Y\'),\'CAPITA\', \'0\', \'POBLACION CAPITADA\', \r\n \'FACTURA CAPITADA\', F.Nombre_TER, concat(\'{\',I.Codigo_USR,\'} \', I.ID_USR), D.ValPaciente_FAC, D.ValEntidad_FAC, K.Codigo_RAD,  DATE_FORMAT(L.FechaConf_RAD, \'%d/%m/%Y\'), D.ValCredito_FAC, D.ValTotal_FAC \r\nFrom\r\n gxeps AS E, czterceros AS F, \r\n itusuarios AS I,  gxfacturascapita AS G, gxfacturas AS D \r\n left join czradicacionesdet AS K On D.Codigo_FAC=K.Codigo_FAC left join czradicacionescab AS L On L.Codigo_RAD=K.Codigo_RAD\r\nWhere\r\n D.Codigo_FAC=G.Codigo_FAC\r\n AND F.Codigo_TER = E.Codigo_TER AND trim(D.Codigo_EPS) = trim(E.Codigo_EPS) \r\n AND D.Codigo_USR = I.Codigo_USR and D.Estado_FAC=\'1\'\r\n AND D.Fecha_FAC>=\'@FECHA_INICIAL 00:00:00\' AND D.Fecha_FAC<=\'@FECHA_FINAL 23:59:59\'\r\nOrder By\r\n2,1;' WHERE  `Codigo_RPT`='listarfacturasfecha' AND `Codigo_DCD`=0;
UPDATE `itreports` SET `SQL_RPT`='SELECT concat(c.Codigo_CIT,\'-\',c.Codigo_AGE) AS \'CODIGO CEX\', j.Sigla_TID AS \'TIPO DOC.\', d.ID_TER AS \'IDENTIFICACION\', a.Codigo_SEX AS \'GENERO\', d.Nombre_TER AS \'NOMBRE PACIENTE\', TIMESTAMPDIFF(YEAR,a.FechaNac_PAC,c.FechaGraba_CIT) AS \'EDAD\', \r\n d.Telefono_TER AS \'TELEFONOS\', d.Direccion_TER AS \'DIRECCION\', i.Nombre_EPS AS \'CONTRATO\', g.Nombre_ARE AS \'AREA\', h.Nombre_CNS AS \'CONSULTORIO\', c.Hora_AGE AS \'TURNO\', c.Fecha_AGE AS \'FECHA CITA\', c.FechaDeseada_CIT AS \'FECHA DESEADA\' , c.FechaGraba_CIT AS \'FECHA ASIGNACION\', \r\n (case c.Estado_CIT when \'X\' then \'CANCELADA\' when \'R\' then \'REPROGRAMADA\' ELSE ( case c.Confirma_CIT when \'1\' then \'ATENDIDO\' when \'0\' then \'NO ASISTE\' END) END) AS \'ESTADO\', \r\n f.Nombre_ESP AS \'ESPECIALIDAD\',e.ID_TER  AS \'ID MEDICO\',e.Nombre_TER  AS \'NOMBRE DEL MEDICO\', case c.TipoConsulta_CIT when \'1\' then \'PRIMERA VEZ\' ELSE \'CONTROL\' END AS \'TIPO CITA\', u.ID_USR AS \'COD. USUARIO\', u.Nombre_USR AS \'NOMBRE USUARIO\'\r\nFrom gxpacientes a, gxagendacab b, gxcitasmedicas c, czterceros d, czterceros e, gxespecialidades f, gxareas g, gxconsultorios h, gxeps i, cztipoid j, itusuarios u\r\nWhere a.Codigo_TER=d.Codigo_TER and a.Codigo_TER=c.Codigo_TER and e.Codigo_TER=b.Codigo_TER and f.Codigo_ESP=b.Codigo_ESP and j.Codigo_TID=d.Codigo_TID AND u.Codigo_USR=c.Codigo_USR\r\nand g.Codigo_ARE=b.Codigo_ARE and c.Codigo_AGE=b.Codigo_AGE and h.Codigo_CNS=b.Codigo_CNS and i.Codigo_EPS=a.Codigo_EPS  AND Estado_AGE=\'1\' \r\n AND @VARFECHA  between \'@FECHA_INICIAL\' and \'@FECHA_FINAL 23:59:59\'  Order By  5,2,3,6,1,7' WHERE  `Codigo_RPT`='citasxdia' AND `Codigo_DCD`=0;
UPDATE `itusuarios` SET `Clave_USR`='3f4d79a30cdb71123537dc79f720c2910d956854' WHERE  `Codigo_USR`='1' AND `ID_USR`='nexus';
ALTER TABLE `hcfolios`
	CHANGE COLUMN `NumFolio_HCF` `NumFolio_HCF` INT(11) NOT NULL DEFAULT '0' AFTER `Folio_HCF`;
ALTER TABLE `hcfolios`
	CHANGE COLUMN `NumFolio_HFC` `NumFolio_HFC` INT(11) NOT NULL DEFAULT '0' AFTER `NumFolio_HCF`;
INSERT INTO `ititems` (`Codigo_ITM`, `Codigo_MNU`, `Codigo_MOD`, `Codigo_APP`, `Nombre_ITM`, `Icono_ITM`, `Enlace_ITM`, `Padre_ITM`, `OpSave_ITM`) VALUES ('556', '100', '2', '2', 'Ordenes Diagnósticas', 'database_table.png', 'reports/hcorddx.php', '437', '0');
INSERT INTO `itreports` (`Codigo_RPT`, `Descripcion_RPT`, `Subtitle_RPT`, `SQL_RPT`, `Orientacion_RPT`) VALUES ('hcorddx', 'Ordenamiento Diagnóstico', 'Ordenes realizadas entre @FECHA_INICIAL y @FECHA_FINAL ', 'Select c.Fecha_AGE, g.Nombre_ARE, h.Nombre_CNS, e.ID_TER, e.Nombre_TER, f.Nombre_ESP, c.Hora_AGE, j.Sigla_TID, d.ID_TER, d.Nombre_TER, TIMESTAMPDIFF(YEAR,a.FechaNac_PAC,c.FechaGraba_CIT) AS edad, a.Codigo_SEX, d.Telefono_TER, d.Direccion_TER, i.Nombre_EPS, u.ID_USR, c.FechaGraba_CIT\r\nFrom gxpacientes a, gxagendacab b, gxcitasmedicas c, czterceros d, czterceros e, gxespecialidades f, gxareas g, gxconsultorios h, gxeps i, cztipoid j, itusuarios u\r\nWhere a.Codigo_TER=d.Codigo_TER and a.Codigo_TER=c.Codigo_TER and e.Codigo_TER=b.Codigo_TER and f.Codigo_ESP=b.Codigo_ESP and j.Codigo_TID=d.Codigo_TID AND u.Codigo_USR=c.Codigo_USR\r\nand g.Codigo_ARE=b.Codigo_ARE and c.Codigo_AGE=b.Codigo_AGE and h.Codigo_CNS=b.Codigo_CNS and i.Codigo_EPS=a.Codigo_EPS and c.Estado_CIT=\'P\' AND Estado_AGE=\'1\' \r\nAND @VARFECHA  between \'@FECHA_INICIAL\' and \'@FECHA_FINAL 23:59:59\'  Order By  5,2,3,6,1,7', 'L');
UPDATE `itreports` SET `SQL_RPT`='SELECT concat(c.Codigo_CIT,\'-\',c.Codigo_AGE) AS \'CODIGO CEX\', j.Sigla_TID AS \'TIPO DOC.\', d.ID_TER AS \'IDENTIFICACION\', a.Codigo_SEX AS \'GENERO\', d.Nombre_TER AS \'NOMBRE PACIENTE\', TIMESTAMPDIFF(YEAR,a.FechaNac_PAC,c.FechaGraba_CIT) AS \'EDAD\', \r\n d.Telefono_TER AS \'TELEFONOS\', d.Direccion_TER AS \'DIRECCION\', i.Nombre_EPS AS \'CONTRATO\', g.Nombre_ARE AS \'AREA\', c.Hora_AGE AS \'TURNO\', c.Fecha_AGE AS \'FECHA CITA\',\r\n (case c.Estado_CIT when \'X\' then \'CANCELADA\' when \'R\' then \'REPROGRAMADA\' ELSE ( case c.Confirma_CIT when \'1\' then \'ATENDIDO\' when \'0\' then \'NO ASISTE\' END) END) AS \'ESTADO\', \r\n f.Nombre_ESP AS \'ESPECIALIDAD\',e.ID_TER  AS \'ID MEDICO\',e.Nombre_TER  AS \'NOMBRE DEL MEDICO\',\r\n s.Nombre_SER, v.Cantidad_HCS, v.Observaciones_HCS\r\nFrom gxpacientes a, gxagendacab b, gxcitasmedicas c, czterceros d, czterceros e, gxespecialidades f, \r\ngxareas g, gxeps i, cztipoid j, hcfolios t, hcordenesdx v, gxservicios s\r\nWhere a.Codigo_TER=d.Codigo_TER and a.Codigo_TER=c.Codigo_TER and e.Codigo_TER=b.Codigo_TER and f.Codigo_ESP=b.Codigo_ESP and j.Codigo_TID=d.Codigo_TID \r\nand g.Codigo_ARE=b.Codigo_ARE and c.Codigo_AGE=b.Codigo_AGE  and i.Codigo_EPS=a.Codigo_EPS  AND Estado_AGE=\'1\' AND s.Codigo_SER=v.Codigo_SER\r\nAND t.Codigo_TER=v.Codigo_TER AND t.Codigo_HCF=v.Codigo_HCF AND c.Codigo_TER=t.Codigo_TER AND DATE(c.Fecha_AGE)=DATE(t.Fecha_HCF)\r\n AND t.Fecha_HCF  BETWEEN  \'@FECHA_INICIAL\' and \'@FECHA_FINAL 23:59:59\'  Order By  5,2,3,6,1,7' WHERE  `Codigo_RPT`='hcorddx' AND `Codigo_DCD`=0;
INSERT INTO `itreportsparam` (`Codigo_RPT`, `Campo_RPT`, `Titulo_RPT`, `Orden_RPT`, `Tipo_RPT`) VALUES ('hcorddx', 'FECHA_FINAL', 'Fecha Final', '3', 'D');
INSERT INTO `itreportsparam` (`Codigo_RPT`, `Campo_RPT`, `Titulo_RPT`, `Orden_RPT`, `Tipo_RPT`) VALUES ('hcorddx', 'FECHA_INICIAL', 'Fecha Inicial', '2', 'D');
UPDATE `itreports` SET `SQL_RPT`='SELECT concat(c.Codigo_CIT,\'-\',c.Codigo_AGE) AS \'CODIGO CEX\', j.Sigla_TID AS \'TIPO DOC.\', d.ID_TER AS \'IDENTIFICACION\', a.Codigo_SEX AS \'GENERO\', d.Nombre_TER AS \'NOMBRE PACIENTE\', TIMESTAMPDIFF(YEAR,a.FechaNac_PAC,c.FechaGraba_CIT) AS \'EDAD\', \r\n d.Telefono_TER AS \'TELEFONOS\', d.Direccion_TER AS \'DIRECCION\', i.Nombre_EPS AS \'CONTRATO\', g.Nombre_ARE AS \'AREA\', c.Hora_AGE AS \'TURNO\', c.Fecha_AGE AS \'FECHA CITA\',\r\n (case c.Estado_CIT when \'X\' then \'CANCELADA\' when \'R\' then \'REPROGRAMADA\' ELSE ( case c.Confirma_CIT when \'1\' then \'ATENDIDO\' when \'0\' then \'NO ASISTE\' END) END) AS \'ESTADO\', \r\n f.Nombre_ESP AS \'ESPECIALIDAD\',e.ID_TER  AS \'ID MEDICO\',e.Nombre_TER  AS \'NOMBRE DEL MEDICO\',\r\n s.CUPS_PRC AS \'CUPS\', s.Nombre_PRC AS \'EXAMEN\', v.Cantidad_HCS AS \'CANTIDAD\', v.Observaciones_HCS AS \'OBSERVACIONES\' \r\nFrom gxpacientes a, gxagendacab b, gxcitasmedicas c, czterceros d, czterceros e, gxespecialidades f, \r\ngxareas g, gxeps i, cztipoid j, hcfolios t, hcordenesdx v, gxservicios s\r\nWhere a.Codigo_TER=d.Codigo_TER and a.Codigo_TER=c.Codigo_TER and e.Codigo_TER=b.Codigo_TER and f.Codigo_ESP=b.Codigo_ESP and j.Codigo_TID=d.Codigo_TID \r\nand g.Codigo_ARE=b.Codigo_ARE and c.Codigo_AGE=b.Codigo_AGE  and i.Codigo_EPS=a.Codigo_EPS  AND Estado_AGE=\'1\' AND s.Codigo_SER=v.Codigo_SER\r\nAND t.Codigo_TER=v.Codigo_TER AND t.Codigo_HCF=v.Codigo_HCF AND c.Codigo_TER=t.Codigo_TER AND DATE(c.Fecha_AGE)=DATE(t.Fecha_HCF)\r\n AND t.Fecha_HCF  BETWEEN  \'@FECHA_INICIAL\' and \'@FECHA_FINAL 23:59:59\'  Order By  5,2,3,6,1,7' WHERE  `Codigo_RPT`='hcorddx' AND `Codigo_DCD`=0;
INSERT INTO `ititems` (`Codigo_ITM`, `Codigo_MNU`, `Codigo_MOD`, `Codigo_APP`, `Nombre_ITM`, `Icono_ITM`, `Enlace_ITM`, `Padre_ITM`, `OpSave_ITM`) VALUES ('557', '100', '2', '2', 'Ordenes Medicamentos', 'database_table.png', 'reports/hcordmed.php', '437', '0');
INSERT INTO `itreports` (`Codigo_RPT`, `Descripcion_RPT`, `Subtitle_RPT`, `SQL_RPT`, `Orientacion_RPT`) VALUES ('hcordmed', 'Ordenamiento de Medicamentos', 'Ordenes realizadas entre @FECHA_INICIAL y @FECHA_FINAL ', 'SELECT concat(c.Codigo_CIT,\'-\',c.Codigo_AGE) AS \'CODIGO CEX\', j.Sigla_TID AS \'TIPO DOC.\', d.ID_TER AS \'IDENTIFICACION\', a.Codigo_SEX AS \'GENERO\', d.Nombre_TER AS \'NOMBRE PACIENTE\', TIMESTAMPDIFF(YEAR,a.FechaNac_PAC,c.FechaGraba_CIT) AS \'EDAD\', \r\n d.Telefono_TER AS \'TELEFONOS\', d.Direccion_TER AS \'DIRECCION\', i.Nombre_EPS AS \'CONTRATO\', g.Nombre_ARE AS \'AREA\', c.Hora_AGE AS \'TURNO\', c.Fecha_AGE AS \'FECHA CITA\',\r\n (case c.Estado_CIT when \'X\' then \'CANCELADA\' when \'R\' then \'REPROGRAMADA\' ELSE ( case c.Confirma_CIT when \'1\' then \'ATENDIDO\' when \'0\' then \'NO ASISTE\' END) END) AS \'ESTADO\', \r\n f.Nombre_ESP AS \'ESPECIALIDAD\',e.ID_TER  AS \'ID MEDICO\',e.Nombre_TER  AS \'NOMBRE DEL MEDICO\',\r\n s.Codigo_MED AS \'CODIGO\', s.Nombre_MED AS \'MEDICAMENTO\', v.Cantidad_HCM AS \'CANTIDAD\', v.Observaciones_HCM AS \'OBSERVACIONES\' \r\nFrom gxpacientes a, gxagendacab b, gxcitasmedicas c, czterceros d, czterceros e, gxespecialidades f, \r\ngxareas g, gxeps i, cztipoid j, hcfolios t, hcordenesmedica v, gxmedicamentos s\r\nWhere a.Codigo_TER=d.Codigo_TER and a.Codigo_TER=c.Codigo_TER and e.Codigo_TER=b.Codigo_TER and f.Codigo_ESP=b.Codigo_ESP and j.Codigo_TID=d.Codigo_TID \r\nand g.Codigo_ARE=b.Codigo_ARE and c.Codigo_AGE=b.Codigo_AGE  and i.Codigo_EPS=a.Codigo_EPS  AND Estado_AGE=\'1\' AND s.Codigo_SER=v.Codigo_SER\r\nAND t.Codigo_TER=v.Codigo_TER AND t.Codigo_HCF=v.Codigo_HCF AND c.Codigo_TER=t.Codigo_TER AND DATE(c.Fecha_AGE)=DATE(t.Fecha_HCF)\r\n AND t.Fecha_HCF  BETWEEN  \'@FECHA_INICIAL\' and \'@FECHA_FINAL 23:59:59\'  Order By  5,2,3,6,1,7', 'L');
INSERT INTO `itreportsparam` (`Codigo_RPT`, `Campo_RPT`, `Titulo_RPT`, `Orden_RPT`, `Tipo_RPT`) VALUES ('hcordmed', 'FECHA_FINAL', 'Fecha Final', '2', 'D');
INSERT INTO `itreportsparam` (`Codigo_RPT`, `Campo_RPT`, `Titulo_RPT`, `Orden_RPT`, `Tipo_RPT`) VALUES ('hcordmed', 'FECHA_INICIAL', 'Fecha Inicial', '1', 'D');
UPDATE `itreportsparam` SET `Orden_RPT`='1' WHERE  `Codigo_RPT`='hcorddx' AND `Campo_RPT`='FECHA_INICIAL' AND `Codigo_DCD`=0;
UPDATE `itreportsparam` SET `Orden_RPT`='2' WHERE  `Codigo_RPT`='hcorddx' AND `Campo_RPT`='FECHA_FINAL' AND `Codigo_DCD`=0;
